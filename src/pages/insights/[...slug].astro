---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const insights = await getCollection('insights');
  return insights.map((insight) => ({
    params: { slug: insight.slug },
    props: { insight },
  }));
}

const { insight } = Astro.props;
const { Content } = await insight.render();
---

<BaseLayout title={insight.data.title} description={insight.data.description}>
  <article class="py-20 bg-gradient-to-b from-white to-fog">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="mb-8">
        <span class="text-sm text-gray-500 font-medium">{insight.data.category}</span>
        <h1 class="text-5xl font-serif font-bold text-slate-deep mt-2 mb-4">{insight.data.title}</h1>
        <p class="text-xl text-gray-600 mb-4">{insight.data.description}</p>
        <time class="text-sm text-gray-500">
          {insight.data.pubDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
        </time>
      </div>
    </div>
  </article>

  <section class="py-16 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 prose prose-lg max-w-none">
      <Content />
    </div>
  </section>

  <section class="py-20 bg-slate-deep text-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-4xl font-serif font-bold mb-6">Ready to Work Together?</h2>
      <p class="text-xl text-gray-300 mb-8">
        Let's discuss how we can help you win more grants and RFPs.
      </p>
      <a
        href="/contact"
        class="inline-block px-8 py-3 bg-ridge-blue text-white rounded-md text-lg font-medium hover:bg-opacity-90 transition-colors"
      >
        Schedule a Conversation
      </a>
    </div>
  </section>
</BaseLayout>

